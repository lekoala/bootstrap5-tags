var D={items:[],allowNew:!1,showAllSuggestions:!1,badgeStyle:"primary",allowClear:!1,clearEnd:!1,selected:[],regex:"",separator:[],max:0,clearLabel:"Clear",searchLabel:"Type a value",showDropIcon:!0,keepOpen:!1,allowSame:!1,baseClass:"",placeholder:"",addOnBlur:!1,showDisabled:!1,hideNativeValidation:!1,suggestionsThreshold:-1,maximumItems:0,autoselectFirst:!0,updateOnSelect:!1,highlightTyped:!1,highlightClass:"",fullWidth:!0,fixed:!1,fuzzy:!1,startsWith:!1,singleBadge:!1,activeClasses:["bg-primary","text-white"],labelField:"label",valueField:"value",searchFields:["label"],queryParam:"query",server:"",serverMethod:"GET",serverParams:{},serverDataKey:"data",fetchOptions:{},liveServer:!1,noCache:!0,debounceTime:300,notFoundMessage:"",onRenderItem:(o,t,e)=>t,onSelectItem:(o,t)=>{},onClearItem:(o,t)=>{},onCreateItem:(o,t)=>{},onBlur:(o,t)=>{},onFocus:(o,t)=>{},onCanAdd:(o,t,e)=>{},confirmClear:(o,t)=>Promise.resolve(),confirmAdd:(o,t)=>Promise.resolve(),onServerResponse:(o,t)=>o.json()},v="tags-",M="is-loading",N="is-active",g="is-invalid",H="is-max-reached",L="show",b="data-value",C="next",O="prev",R="form-control-focus",q="form-placeholder-shown",P="form-control-disabled",E=new WeakMap,j=0,T=window.bootstrap&&window.bootstrap.Tooltip;function V(o,t=300){let e;return(...i)=>{clearTimeout(e),e=setTimeout(()=>{o.apply(this,i)},t)}}function W(o,t=null){let e=p("span");document.body.appendChild(e),e.style.fontSize=t||"inherit",e.style.height="auto",e.style.width="auto",e.style.position="absolute",e.style.whiteSpace="no-wrap",e.innerHTML=o;let i=Math.ceil(e.clientWidth);return document.body.removeChild(e),i}function _(o){return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function F(o){return o?_(o.toString()).toLowerCase():""}function U(o,t){if(o.indexOf(t)>=0)return!0;let e=0;for(let i=0;i<t.length;i++){let s=t[i];if(s!=" "&&(e=o.indexOf(s,e)+1,e<=0))return!1}return!0}function I(o){o.style.display="none",x(o,{"aria-hidden":"true"})}function z(o){o.style.display="list-item",x(o,{"aria-hidden":"false"})}function x(o,t){for(let[e,i]of Object.entries(t))o.setAttribute(e,i)}function S(o,t){o.hasAttribute(t)&&o.removeAttribute(t)}function B(o){return["true","false","1","0",!0,!1].includes(o)&&!!JSON.parse(o)}function p(o){return document.createElement(o)}var y=class{constructor(t,e={}){if(!(t instanceof HTMLElement)){console.error("Invalid element",t);return}E.set(t,this),j++,this.i=t,this.T(e),this.h=!1,this.F=V(()=>{this.S(!0)},this.e.debounceTime),this.c=!0,this.k(),this.l=p("div"),this.r=p("div"),this.n=p("ul"),this.s=p("input"),this.l.appendChild(this.r),this.i.parentElement.insertBefore(this.l,this.i),this.D(),this.M(),this.N(),this.H(),this.R(),this.resetState(),this.handleEvent=i=>{this.w(i)},this.e.fixed&&(document.addEventListener("scroll",this,!0),window.addEventListener("resize",this)),["focus","blur","input","keydown"].forEach(i=>{this.s.addEventListener(i,this)}),["mousemove","mouseleave"].forEach(i=>{this.n.addEventListener(i,this)}),this.loadData(!0)}static init(t="select[multiple]",e={}){let i=document.querySelectorAll(t);for(let s=0;s<i.length;s++)y.getInstance(i[s])||new y(i[s],e)}static getInstance(t){if(E.has(t))return E.get(t)}dispose(){["focus","blur","input","keydown"].forEach(t=>{this.s.removeEventListener(t,this)}),["mousemove","mouseleave"].forEach(t=>{this.n.removeEventListener(t,this)}),this.e.fixed&&(document.removeEventListener("scroll",this,!0),window.removeEventListener("resize",this)),this.i.style.display="block",this.l.parentElement.removeChild(this.l),this.parentForm&&this.parentForm.removeEventListener("reset",this),E.delete(this.i)}handleEvent(t){this.w(t)}w(t){["scroll","resize"].includes(t.type)?(this.A&&window.cancelAnimationFrame(this.A),this.A=window.requestAnimationFrame(()=>{this[`on${t.type}`](t)})):this[`on${t.type}`](t)}T(t={}){this.e=Object.assign({},D,{showDropIcon:!!this.u()});let e=this.i.dataset.config?JSON.parse(this.i.dataset.config):{},i={...t,...e,...this.i.dataset};for(let[s,r]of Object.entries(D)){if(s=="config"||i[s]===void 0)continue;let l=i[s];switch(typeof r){case"number":this.e[s]=parseInt(l);break;case"boolean":this.e[s]=B(l);break;case"string":this.e[s]=l.toString();break;case"object":this.e[s]=l,typeof l=="string"&&(["{","["].includes(l[0])?this.e[s]=JSON.parse(l):this.e[s]=l.split(l.includes("|")?"|":","));break;case"function":this.e[s]=typeof l=="string"?l.split(".").reduce((n,a)=>n[a],window):l,this.e[s]||console.error("Invalid function",l);break;default:this.e[s]=l;break}}this.e.placeholder||(this.e.placeholder=this.q()),this.e.suggestionsThreshold==-1&&(this.e.suggestionsThreshold=this.e.liveServer?1:0)}config(t=null){return t?this.e[t]:this.e}setConfig(t,e){this.e[t]=e}k(){for(this.overflowParent=null,this.parentForm=this.i.parentElement;this.parentForm&&(this.parentForm.style.overflow==="hidden"&&(this.overflowParent=this.parentForm),this.parentForm=this.parentForm.parentElement,!(this.parentForm&&this.parentForm.nodeName=="FORM")););this.parentForm&&this.parentForm.addEventListener("reset",this)}q(){if(this.i.hasAttribute("placeholder"))return this.i.getAttribute("placeholder");if(this.i.dataset.placeholder)return this.i.dataset.placeholder;let t=this.i.querySelector("option");return!t||!this.e.autoselectFirst?"":(S(t,"selected"),t.selected=!1,t.value?"":t.textContent)}N(){let t=this.i;this.e.hideNativeValidation?(t.style.position="absolute",t.style.left="-9999px"):t.style.cssText="height:1px;width:1px;opacity:0;padding:0;margin:0;border:0;float:left;flex-basis:100%;min-height:unset;",t.tabIndex=-1,t.addEventListener("focus",e=>{this.onclick(e)}),t.addEventListener("invalid",e=>{this.l.classList.add(g)})}R(){let t=this.n;t.classList.add("dropdown-menu",v+"menu"),t.id=v+"menu-"+j,t.setAttribute("role","menu");let e=t.style;e.padding="0",e.maxHeight="280px",this.e.fullWidth||(e.maxWidth="360px"),this.e.fixed&&(e.position="fixed"),e.overflowY="auto",e.overscrollBehavior="contain",e.textAlign="unset",t.addEventListener("mouseenter",i=>{this.h=!1}),this.l.appendChild(t),this.s.setAttribute("aria-controls",t.id)}D(){let t=this.l;t.classList.add("form-control","dropdown"),["form-select-lg","form-select-sm","is-invalid","is-valid"].forEach(e=>{this.i.classList.contains(e)&&t.classList.add(e)}),this.e.suggestionsThreshold==0&&this.e.showDropIcon&&t.classList.add("form-select"),this.overflowParent&&(t.style.position="inherit"),t.style.height="auto",t.addEventListener("click",this)}M(){this.r.addEventListener("click",e=>{this.isDisabled()||this.s.style.visibility!="hidden"&&this.s.focus()});let t=this.r.style;t.display="flex",t.alignItems="center",t.flexWrap="wrap"}H(){let t=this.s;t.type="text",t.autocomplete="off",t.spellcheck=!1,x(t,{"aria-autocomplete":"list","aria-haspopup":"menu","aria-expanded":"false","aria-label":this.e.searchLabel,role:"combobox"}),t.style.cssText="background-color:transparent;color:currentColor;border:0;padding:0;outline:0;max-width:100%",this.resetSearchInput(!0),this.r.appendChild(t),this.P=window.getComputedStyle(t).direction==="rtl"}onfocus(t){this.l.classList.add(R),this.showOrSearch(),this.e.onFocus(t,this)}onblur(t){this.a&&this.a.abort();let e=!0;if(this.e.addOnBlur&&this.s.value&&(e=this.L()),this.l.classList.remove(R),this.hideSuggestions(e),this.c){let i=this.getSelection(),s={selection:i?i.dataset.value:null,input:this.s.value};this.e.onBlur(t,this),this.i.dispatchEvent(new CustomEvent("tags.blur",{bubbles:!0,detail:s}))}}oninput(t){let e=this.s.value;if(e){let i=e.slice(-1);if(this.e.separator.length&&this.e.separator.includes(i)){this.s.value=this.s.value.slice(0,-1);let s=this.s.value,r=s,l={};if(this.e.allowNew)l.new=1;else{let n=this.getSelection();if(!n)return;s=n.getAttribute(b),r=n.dataset.label}this.e.confirmAdd(s,this).then(()=>{this.p(r,s,l)}).catch(()=>{});return}}setTimeout(()=>{this.o()}),this.showOrSearch()}onkeydown(t){let e=t.keyCode||t.key,i=t.target;switch(t.keyCode==229&&(e=i.value.charAt(i.selectionStart-1).charCodeAt(0)),e){case 13:case"Enter":t.preventDefault(),this.L();break;case 38:case"ArrowUp":t.preventDefault(),this.h=!0,this.m(O);break;case 40:case"ArrowDown":t.preventDefault(),this.h=!0,this.isDropdownVisible()?this.m(C):this.showOrSearch(!1);break;case 8:case"Backspace":let s=this.getLastItem();this.s.value.length==0&&s&&this.e.confirmClear(s,this).then(()=>{this.removeLastItem(),this.o(),this.showOrSearch()}).catch(()=>{});break;case 27:case"Escape":this.s.focus(),this.hideSuggestions();break}}onmousemove(t){this.h=!1}onmouseleave(t){this.removeSelection()}onscroll(t){this.g()}onresize(t){this.g()}onclick(t=null){t&&t.preventDefault(),!(!this.isSingle()&&this.isMaxReached())&&this.s.focus()}onreset(t){this.reset()}loadData(t=!1){Object.keys(this.e.items).length>0?this.setData(this.e.items,!0):this.resetSuggestions(!0),this.e.server&&(this.e.liveServer||this.S(!t))}j(){let t=this.i.selectedOptions||[];for(let e=0;e<t.length;e++)t[e].value&&!t[e].hasAttribute("selected")&&t[e].setAttribute("selected","selected")}resetState(){this.isDisabled()?(this.l.setAttribute("readonly",""),this.s.setAttribute("disabled",""),this.l.classList.add(P)):(S(this.l,"readonly"),S(this.s,"disabled"),this.l.classList.remove(P))}resetSuggestions(t=!1){this.j();let e=s=>({value:s.getAttribute("value"),label:s.textContent,disabled:s.disabled,selected:s.selected,data:Object.assign({disabled:s.disabled},s.dataset)}),i=Array.from(this.i.children).filter(s=>s.hasAttribute("label")||!s.disabled||this.e.showDisabled).map(s=>s.hasAttribute("label")?{group:s.getAttribute("label"),items:Array.from(s.children).map(r=>e(r))}:e(s));this.setData(i,t)}L(){let t=this.getSelection();if(t)return t.click(),!0;if(this.e.allowNew&&this.s.value){let e=this.s.value;return this.e.confirmAdd(e,this).then(()=>{this.p(e,e,{new:1})}).catch(()=>{}),!0}return!1}S(t=!1){this.a&&this.a.abort(),this.a=new AbortController;let e=this.i.dataset.serverParams||{};typeof e=="string"&&(e=JSON.parse(e));let i=Object.assign({},this.e.serverParams,e);if(i[this.e.queryParam]=this.s.value,this.e.noCache&&(i.t=Date.now()),i.related){let n=document.getElementById(i.related);if(n){i.related=n.value;let a=n.getAttribute("name");a&&(i[a]=n.value)}}let s=new URLSearchParams(i),r=this.e.server,l=Object.assign(this.e.fetchOptions,{method:this.e.serverMethod||"GET",signal:this.a.signal});l.method==="POST"?l.body=s:r+="?"+s.toString(),this.l.classList.add(M),fetch(r,l).then(n=>this.e.onServerResponse(n,this)).then(n=>{let a=n[this.e.serverDataKey]||n;this.setData(a,!t),this.a=null,t&&this.b()}).catch(n=>{n.name==="AbortError"||this.a.signal.aborted||console.error(n)}).finally(n=>{this.l.classList.remove(M)})}p(t,e=null,i={}){if(!this.canAdd(t,i))return null;let s=this.addItem(t,e,i);return this.v(),this.e.keepOpen?this.b():this.resetSearchInput(),s}f(t){if(t.style.display==="none")return!1;let e=t.firstElementChild;return e.tagName==="A"&&!e.classList.contains("disabled")}m(t=C,e=null){let i=this.getSelection();if(i){let s=t===C?"nextSibling":"previousSibling";e=i.parentNode;do e=e[s];while(e&&!this.f(e));e?i.classList.remove(...this.d()):i&&(e=i.parentElement)}else{if(t===O)return e;if(!e)for(e=this.n.firstChild;e&&!this.f(e);)e=e.nextSibling}if(e){let s=e.offsetHeight,r=e.offsetTop,l=e.parentNode,n=l.offsetHeight,a=l.scrollHeight,h=l.offsetTop;if(s===0&&setTimeout(()=>{l.scrollTop=0}),t===O){let f=r-h>10?r-h:0;l.scrollTop=f}else r+s-(n+l.scrollTop)>0&&s>0&&(l.scrollTop=r+s-n+1,l.scrollTop+n>=a-10&&(l.scrollTop=r-h));let c=e.querySelector("a");c.classList.add(...this.d()),this.s.setAttribute("aria-activedescendant",c.id),this.e.updateOnSelect&&(this.s.value=c.dataset.label,this.o())}else this.s.setAttribute("aria-activedescendant","");return e}o(){this.l.classList.remove(q),this.s.value?this.s.size=this.s.value.length:this.getSelectedValues().length?(this.s.placeholder="",this.s.size=1):(this.s.size=this.e.placeholder.length>0?this.e.placeholder.length:1,this.s.placeholder=this.e.placeholder,this.l.classList.add(q));let t=this.s.value||this.s.placeholder,e=window.getComputedStyle(this.l).fontSize,i=W(t,e)+16;this.s.style.width=i+"px"}z(t){for(;this.n.lastChild;)this.n.removeChild(this.n.lastChild);let e=0,i=1;for(let s=0;s<t.length;s++){let r=t[s];if(r){if(r.group&&r.items){let l=p("li");l.setAttribute("role","presentation"),l.dataset.id=""+i;let n=p("span");if(l.append(n),n.classList.add("dropdown-header","text-truncate"),n.innerHTML=r.group,this.n.appendChild(l),r.items)for(let a=0;a<r.items.length;a++){let h=r.items[a];h.group_id=i,this.C(r.items[a],e),e++}i++}this.C(r,e),e++}}if(this.e.notFoundMessage){let s=p("li");s.setAttribute("role","presentation"),s.classList.add(v+"not-found"),s.innerHTML='<span class="dropdown-item"></span>',this.n.appendChild(s)}}C(t,e){if(!t[this.e.valueField])return;let i=t[this.e.valueField],s=t[this.e.labelField],r=this.e.onRenderItem(t,s,this),l=p("li");l.setAttribute("role","presentation"),t.group_id&&l.setAttribute("data-group-id",""+t.group_id);let n=p("a");l.append(n),n.id=this.n.id+"-"+e,n.classList.add("dropdown-item","text-truncate"),t.disabled&&n.classList.add("disabled"),n.setAttribute(b,i),n.dataset.label=s,this.e.searchFields.forEach(a=>{l.dataset[a]=t[a]}),n.setAttribute("href","#"),n.innerHTML=r,this.n.appendChild(l),n.addEventListener("mouseenter",a=>{this.h||(this.removeSelection(),l.querySelector("a").classList.add(...this.d()))}),n.addEventListener("mousedown",a=>{a.preventDefault()}),n.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.e.confirmAdd(i,this).then(()=>{this.p(s,i,t.data),this.e.onSelectItem(t,this)}).catch(()=>{})})}initialOptions(){return this.i.querySelectorAll("option[data-init]")}E(){this.i.querySelectorAll("option").forEach(t=>{S(t,"selected")})}reset(){this.removeAll(),this.c=!1;let t=this.initialOptions();this.E();for(let e=0;e<t.length;e++){let i=t[e],s=Object.assign({},{disabled:i.hasAttribute("disabled")},i.dataset);this.addItem(i.textContent,i.value,s)}this.v(),this.c=!0}resetSearchInput(t=!1){this.s.value="",this.o(),t||(this.I()||this.hideSuggestions(),this.s===document.activeElement&&this.s.dispatchEvent(new Event("input"))),this.isMaxReached()?(this.l.classList.add(H),this.s.style.visibility="hidden"):this.s.style.visibility=="hidden"&&(this.s.style.visibility="visible"),this.isSingle()&&!t&&document.activeElement.blur()}getSelectedValues(){let t=this.i.querySelectorAll("option[selected]");return Array.from(t).map(e=>e.value)}getAvailableValues(){let t=this.i.querySelectorAll("option");return Array.from(t).map(e=>e.value)}showOrSearch(t=!0){if(t&&!this.I()){this.hideSuggestions(!1);return}this.e.liveServer?this.F():this.b()}hideSuggestions(t=!0){this.n.classList.remove(L),x(this.s,{"aria-expanded":"false"}),this.removeSelection(),t&&this.l.classList.remove(g)}toggleSuggestions(t=!0,e=!0){this.n.classList.contains(L)?this.hideSuggestions(e):this.showOrSearch(t)}I(){return this.isDisabled()||this.isMaxReached()?!1:this.s.value.length>=this.e.suggestionsThreshold}b(){if(document.activeElement!=this.s||this.s.style.visibility=="hidden")return;let t=F(this.s.value),e={},i=this.n.querySelectorAll("li"),s=0,r=null,l=!1,n={};for(let a=0;a<i.length;a++){let h=i[a],c=h.firstElementChild;if(c instanceof HTMLSpanElement){h.dataset.id&&(n[h.dataset.id]=!1),I(h);continue}if(c.classList.remove(...this.d()),!this.e.allowSame){let u=c.getAttribute(b);if(e[u]=e[u]||0,this.u(c.getAttribute(b),"[selected]",e[u]++)){I(h);continue}}let f=this.e.showAllSuggestions||t.length===0,d=t.length==0&&this.e.suggestionsThreshold===0;!f&&t.length>0&&this.e.searchFields.forEach(u=>{let m=F(c.dataset[u]),A=!1;if(this.e.fuzzy)A=U(m,t);else{let k=m.indexOf(t);A=this.e.startsWith?k===0:k>=0}A&&(d=!0)});let w=d||t.length===0;if(f||d?(s++,z(h),h.dataset.groupId&&(n[h.dataset.groupId]=!0),!r&&this.f(h)&&w&&(r=h),this.e.maximumItems>0&&s>this.e.maximumItems&&I(h)):I(h),this.e.highlightTyped){let u=c.textContent,m=F(u).indexOf(t),A=u.substring(0,m)+`<mark class="${this.e.highlightClass}">${u.substring(m,m+t.length)}</mark>`+u.substring(m+t.length,u.length);c.innerHTML=A}this.f(h)&&(l=!0)}if(!this.e.allowNew&&!(t.length===0&&!l)&&this.l.classList.add(g),this.e.allowNew&&this.e.regex&&this.isInvalid()&&this.l.classList.remove(g),Array.from(i).filter(a=>a.dataset.id).forEach(a=>{n[a.dataset.id]===!0&&z(a)}),l&&(this.l.classList.remove(g),r&&this.e.autoselectFirst&&(this.removeSelection(),this.m(C,r))),s===0)if(this.e.notFoundMessage){let a=this.n.querySelector("."+v+"not-found");a.style.display="block";let h=this.e.notFoundMessage.replace("{{tag}}",this.s.value);a.innerHTML=`<span class="dropdown-item">${h}</span>`,this.O()}else this.hideSuggestions(!1);else this.O()}O(){let t=this.n.classList.contains(L);t||(this.n.classList.add(L),x(this.s,{"aria-expanded":"true"})),this.g(t)}g(t=!1){let e=this.P,i=this.e.fixed,s=this.e.fullWidth,r=this.s.getBoundingClientRect(),l=this.l.getBoundingClientRect(),n=0,a=0;if(i?s?(n=l.x,a=l.y+l.height+2):(n=r.x,a=r.y+r.height):s?(n=0,a=l.height+2):(n=this.s.offsetLeft,a=this.s.offsetHeight+this.s.offsetTop),e&&!s&&(n-=this.n.offsetWidth-r.width),!s){let f=Math.min(window.innerWidth,document.body.offsetWidth),d=e?r.x+r.width-this.n.offsetWidth-1:f-1-(r.x+this.n.offsetWidth);d<0&&(n=e?n-d:n+d)}s&&(this.n.style.width=this.l.offsetWidth+"px"),t||(this.n.style.transform="unset"),Object.assign(this.n.style,{left:n+"px",top:a+"px"});let h=this.n.getBoundingClientRect(),c=window.innerHeight;if(h.y+h.height>c||this.n.style.transform.includes("translateY")){let f=s?l.height+4:r.height;this.n.style.transform="translateY(calc(-100.1% - "+f+"px))"}}B(){let t=5,e=window.jQuery;return e&&e.fn.tooltip&&e.fn.tooltip.Constructor&&(t=parseInt(e.fn.tooltip.Constructor.VERSION.charAt(0))),t}V(t){return!!Array.from(this.i.querySelectorAll("option")).find(s=>s.textContent==t&&s.getAttribute("selected"))}W(t){let i=Array.from(this.i.querySelectorAll("option")).filter(s=>s.textContent==t);return!(i.length>0&&!i.find(r=>!r.getAttribute("selected")))}hasItem(t){for(let e of this.e.items){let i=e.items||[e];for(let s of i)if(s[this.e.labelField]==t)return!0}return!1}_(t){return new RegExp(this.e.regex.trim()).test(t)}getSelection(){return this.n.querySelector("a."+N)}removeSelection(){let t=this.getSelection();t&&t.classList.remove(...this.d())}d(){return[...this.e.activeClasses,N]}getActiveSelection(){return this.getSelection()}removeActiveSelection(){return this.removeSelection()}removeAll(){this.getSelectedValues().forEach(e=>{this.removeItem(e,!0)}),this.o()}removeLastItem(t=!1){let e=this.getLastItem();e&&this.removeItem(e,t)}getLastItem(){let t=this.r.querySelectorAll("span."+v+"badge");return t.length?t[t.length-1].getAttribute(b):void 0}enable(){this.i.setAttribute("disabled",""),this.resetState()}disable(){S(this.i,"disabled"),this.resetState()}isDisabled(){return this.i.hasAttribute("disabled")||this.i.disabled||this.i.hasAttribute("readonly")}isDropdownVisible(){return this.n.classList.contains(L)}isInvalid(){return this.l.classList.contains(g)}isSingle(){return!this.i.hasAttribute("multiple")}isMaxReached(){return this.e.max&&this.getSelectedValues().length>=this.e.max}canAdd(t,e={}){if(!t||e.new&&!this.e.allowNew||!e.new&&!this.hasItem(t)||this.isDisabled())return!1;if(!this.isSingle()&&!this.e.allowSame){if(e.new){if(this.V(t))return!1}else if(!this.W(t))return!1}return this.isMaxReached()?!1:this.e.regex&&e.new&&!this._(t)?(this.l.classList.add(g),!1):this.e.onCanAdd&&this.e.onCanAdd(t,e,this)===!1?(this.l.classList.add(g),!1):!0}getData(){return this.e.items}setData(t,e=!1){Array.isArray(t)||(t=Object.entries(t).map(([i,s])=>({value:i,label:s}))),this.e.items!=t&&(this.e.items=t),e&&(this.E(),t.forEach(i=>{let s=i[this.e.valueField],r=i[this.e.labelField];if(s&&(i.selected||this.e.selected.includes(s))){let l=this.addItem(r,s,i.data);l&&l.setAttribute("data-init","true")}})),this.z(t),this.v()}u(t=null,e="",i=0){let r="option"+(t===null?"":'[value="'+CSS.escape(t)+'"]')+e;return this.i.querySelectorAll(r)[i]||null}addItem(t,e=null,i={}){e||(e=t),this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let s=this.u(e,":not([selected])");if(!s){s=p("option"),s.value=e,s.textContent=t;for(let[r,l]of Object.entries(i))s.dataset[r]=l;this.i.appendChild(s),this.e.onCreateItem(s,this)}return s&&(i=Object.assign({title:s.getAttribute("title")},i,s.dataset)),s.setAttribute("selected","selected"),s.selected=!0,this.U(t,e,i),this.c&&this.i.dispatchEvent(new Event("change",{bubbles:!0})),s}v(){let t=this.i.innerHTML;this.i.innerHTML="",this.i.innerHTML=t,this.o()}U(t,e=null,i={}){let s=this.B()===5,r=i.disabled&&B(i.disabled),l=this.e.allowClear&&!r,n=t,a=p("span"),h=[v+"badge"],c=this.isSingle()&&!this.e.singleBadge;if(!c){h.push("badge");let d=this.e.badgeStyle;i.badgeStyle&&(d=i.badgeStyle),i.badgeClass&&h.push(...i.badgeClass.split(" ")),this.e.baseClass?h.push(...this.e.baseClass.split(" ")):s?h=[...h,"bg-"+d,"text-truncate"]:h=[...h,"badge-"+d],a.style.maxWidth="100%"}r&&h.push("disabled","opacity-50");let f=c?0:2;if(a.style.margin=f+"px 6px "+f+"px 0px",a.style.marginBlock=f+"px",a.style.marginInline="0px 6px",a.classList.add(...h),a.setAttribute(b,e),i.title&&a.setAttribute("title",i.title),l){let d=h.includes("text-dark")||c?"btn-close":"btn-close btn-close-white",w="margin-inline: 0px 6px;",u="left";this.e.clearEnd&&(u="right"),u=="right"&&(w="margin-inline: 6px 0px;");let m=s?'<button type="button" style="font-size:0.65em;'+w+'" class="'+d+'" aria-label="'+this.e.clearLabel+'"></button>':'<button type="button" style="font-size:1em;'+w+'text-shadow:none;color:currentColor;transform:scale(1.2);float:none" class="close" aria-label="'+this.e.clearLabel+'"><span aria-hidden="true">&times;</span></button>';n=u=="left"?m+n:n+m}a.innerHTML=n,this.r.insertBefore(a,this.s),i.title&&T&&s&&T.getOrCreateInstance(a),l&&a.querySelector("button").addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),this.isDisabled()||this.e.confirmClear(e,this).then(()=>{this.removeItem(e),document.activeElement.blur(),this.o()}).catch(()=>{})})}removeItem(t,e=!1){let i=CSS.escape(t),s=this.r.querySelectorAll("span["+b+'="'+i+'"]');if(!s.length)return;let r=s.length-1,l=s[r];l&&(l.dataset.bsOriginalTitle&&T.getOrCreateInstance(l).dispose(),l.remove());let n=this.u(t,"[selected]",r);n&&(S(n,"selected"),n.selected=!1,this.c&&!e&&this.i.dispatchEvent(new Event("change",{bubbles:!0}))),this.s.style.visibility=="hidden"&&!this.isMaxReached()&&(this.s.style.visibility="visible",this.l.classList.remove(H)),e||this.e.onClearItem(t,this)}},$=y;export{$ as default};
//# sourceMappingURL=tags.min.js.map
